name: Set up Minishift

on: [push]

jobs:
  deploy-and-verify:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Download Minishift
        run: wget https://github.com/minishift/minishift/releases/download/v1.34.3/minishift-1.34.3-linux-amd64.tgz -O minishift

      - name: Extract Minishift binary
        run: tar -xvf minishift

      - name: Set executable permissions
        run: chmod +x minishift

      - name: Install Minishift
        run: sudo mv minishift /usr/local/bin/

      - name: Start Minishift cluster
        run: ./minishift-1.37.2-linux-amd64 start --cpus 2 --memory 4096

